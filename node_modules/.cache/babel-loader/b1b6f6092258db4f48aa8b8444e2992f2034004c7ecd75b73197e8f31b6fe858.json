{"ast":null,"code":"var _jsxFileName = \"D:\\\\Works\\\\alfa-digital.agency\\\\AlfaRepairBuilding\\\\testtask\\\\alfarepairbuildingDeploy\\\\src\\\\components\\\\_organisms\\\\Carusel\\\\Carusel.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { Card } from '../../_molecules';\nimport './style.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst slideWidth = 30;\nconst _items = [{\n  product: {\n    title: 'Топас-С 4',\n    desc: 'До 4 человек',\n    old_price: '86 700 ₽',\n    new_price: '78 030 ₽'\n  }\n}, {\n  product: {\n    title: \"Топас-С 4 Пр\",\n    desc: \"До 4 человек\",\n    old_price: '98 300 ₽',\n    new_price: '88 470 ₽'\n  }\n}, {\n  product: {\n    title: 'Топас-С 5',\n    desc: 'До 5 человек',\n    old_price: '99 500 ₽',\n    new_price: '89 550 ₽'\n  }\n}, {\n  product: {\n    title: 'Топас-С 7',\n    desc: 'До 6 человек',\n    old_price: '86 700 ₽',\n    new_price: '78 030 ₽'\n  }\n}, {\n  product: {\n    title: 'Топас-С 6',\n    desc: 'До 7 человек',\n    old_price: '89 550 ₽',\n    new_price: '78 030 ₽'\n  }\n}];\nconst length = _items.length;\n_items.push(..._items);\nconst sleep = function () {\n  let ms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return new Promise(resolve => setTimeout(resolve, ms));\n};\nconst createItem = (position, idx) => {\n  const item = {\n    styles: {\n      transform: `translateX(${position * slideWidth}rem)`\n    },\n    product: _items[idx].product\n  };\n  switch (position) {\n    case length - 1:\n    case length + 1:\n      item.styles = {\n        ...item.styles\n      };\n      break;\n    case length:\n      break;\n    default:\n      item.styles = {\n        ...item.styles,\n        opacity: 0\n      };\n      break;\n  }\n  return item;\n};\nconst CarouselSlideItem = _ref => {\n  let {\n    pos,\n    idx,\n    activeIdx\n  } = _ref;\n  const item = createItem(pos, idx, activeIdx);\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    className: \"carousel__slide-item\",\n    style: item.styles,\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      title: item.product.title,\n      desc: item.product.desc,\n      old_price: item.product.old_price,\n      new_price: item.product.new_price\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n_c = CarouselSlideItem;\nconst keys = Array.from(Array(_items.length).keys());\nexport const Carousel = () => {\n  _s();\n  const [items, setItems] = React.useState(keys);\n  const [isTicking, setIsTicking] = React.useState(false);\n  const [activeIdx, setActiveIdx] = React.useState(0);\n  const bigLength = items.length;\n  const prevClick = function () {\n    let jump = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    if (!isTicking) {\n      setIsTicking(true);\n      setItems(prev => {\n        return prev.map((_, i) => prev[(i + jump) % bigLength]);\n      });\n    }\n  };\n  const nextClick = function () {\n    let jump = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    if (!isTicking) {\n      setIsTicking(true);\n      setItems(prev => {\n        return prev.map((_, i) => prev[(i - jump + bigLength) % bigLength]);\n      });\n    }\n  };\n  useEffect(() => {\n    if (isTicking) sleep(300).then(() => setIsTicking(false));\n  }, [isTicking]);\n  useEffect(() => {\n    setActiveIdx((length - items[0] % length) % length);\n  }, [items]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"carousel__wrap\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carousel__inner\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"carousel__btn carousel__btn--prev\",\n        onClick: () => prevClick(),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"arrow_left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"carousel__container\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"carousel__slide-list\",\n          children: items.map((pos, i) => /*#__PURE__*/_jsxDEV(CarouselSlideItem, {\n            idx: i,\n            pos: pos,\n            activeIdx: activeIdx\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"carousel__btn carousel__btn--next\",\n        onClick: () => nextClick(),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"arrow_right\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 9\n  }, this);\n};\n_s(Carousel, \"gOH6rFo1mMe1AoE/dfYGd+NpOdQ=\");\n_c2 = Carousel;\nvar _c, _c2;\n$RefreshReg$(_c, \"CarouselSlideItem\");\n$RefreshReg$(_c2, \"Carousel\");","map":{"version":3,"names":["React","useEffect","Card","slideWidth","_items","product","title","desc","old_price","new_price","length","push","sleep","ms","Promise","resolve","setTimeout","createItem","position","idx","item","styles","transform","opacity","CarouselSlideItem","pos","activeIdx","keys","Array","from","Carousel","items","setItems","useState","isTicking","setIsTicking","setActiveIdx","bigLength","prevClick","jump","prev","map","_","i","nextClick","then"],"sources":["D:/Works/alfa-digital.agency/AlfaRepairBuilding/testtask/alfarepairbuildingDeploy/src/components/_organisms/Carusel/Carusel.jsx"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Card } from '../../_molecules';\r\nimport './style.scss'\r\n\r\nconst slideWidth = 30;\r\n\r\nconst _items = [\r\n    {\r\n        product: {\r\n            title: 'Топас-С 4',\r\n            desc: 'До 4 человек',\r\n            old_price: '86 700 ₽',\r\n            new_price: '78 030 ₽',\r\n        },\r\n    },\r\n    {\r\n        product: {\r\n            title: \"Топас-С 4 Пр\",\r\n            desc: \"До 4 человек\",\r\n            old_price: '98 300 ₽',\r\n            new_price: '88 470 ₽',\r\n        },\r\n    },\r\n    {\r\n        product: {\r\n            title: 'Топас-С 5',\r\n            desc: 'До 5 человек',\r\n            old_price: '99 500 ₽',\r\n            new_price: '89 550 ₽',\r\n        },\r\n    },\r\n    {\r\n        product: {\r\n            title: 'Топас-С 7',\r\n            desc: 'До 6 человек',\r\n            old_price: '86 700 ₽',\r\n            new_price: '78 030 ₽',\r\n        },\r\n    },\r\n    {\r\n        product: {\r\n            title: 'Топас-С 6',\r\n            desc: 'До 7 человек',\r\n            old_price: '89 550 ₽',\r\n            new_price: '78 030 ₽',\r\n        },\r\n    },\r\n];\r\n\r\nconst length = _items.length;\r\n_items.push(..._items);\r\n\r\nconst sleep = (ms = 0) => {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n};\r\n\r\nconst createItem = (position, idx) => {\r\n    const item = {\r\n        styles: {\r\n            transform: `translateX(${position * slideWidth}rem)`,\r\n        },\r\n        product: _items[idx].product,\r\n    };\r\n\r\n    switch (position) {\r\n        case length - 1:\r\n        case length + 1:\r\n            item.styles = {...item.styles};\r\n            break;\r\n        case length:\r\n            break;\r\n        default:\r\n            item.styles = {...item.styles, opacity: 0};\r\n            break;\r\n    }\r\n\r\n    return item;\r\n};\r\n\r\nconst CarouselSlideItem = ({pos, idx, activeIdx}) => {\r\n    const item = createItem(pos, idx, activeIdx);\r\n\r\n    return (\r\n        <li className=\"carousel__slide-item\" style={item.styles}>\r\n            <Card\r\n                title={item.product.title}\r\n                desc={item.product.desc}\r\n                old_price={item.product.old_price}\r\n                new_price={item.product.new_price}\r\n            />\r\n        </li>\r\n    );\r\n};\r\n\r\nconst keys = Array.from(Array(_items.length).keys());\r\n\r\nexport const Carousel = () => {\r\n    const [items, setItems] = React.useState(keys);\r\n    const [isTicking, setIsTicking] = React.useState(false);\r\n    const [activeIdx, setActiveIdx] = React.useState(0);\r\n    const bigLength = items.length;\r\n\r\n    const prevClick = (jump = 1) => {\r\n        if (!isTicking) {\r\n            setIsTicking(true);\r\n            setItems((prev) => {\r\n                return prev.map((_, i) => prev[(i + jump) % bigLength]);\r\n            });\r\n        }\r\n    };\r\n\r\n    const nextClick = (jump = 1) => {\r\n        if (!isTicking) {\r\n            setIsTicking(true);\r\n            setItems((prev) => {\r\n                return prev.map(\r\n                    (_, i) => prev[(i - jump + bigLength) % bigLength],\r\n                );\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isTicking) sleep(300).then(() => setIsTicking(false));\r\n    }, [isTicking]);\r\n\r\n    useEffect(() => {\r\n        setActiveIdx((length - (items[0] % length)) % length)\r\n    }, [items]);\r\n\r\n    return (\r\n        <div className=\"carousel__wrap\">\r\n            <div className=\"carousel__inner\">\r\n                <button className=\"carousel__btn carousel__btn--prev\" onClick={() => prevClick()}>\r\n                    <div className=\"arrow_left\"></div>\r\n                </button>\r\n                <div className=\"carousel__container\">\r\n                    <ul className=\"carousel__slide-list\">\r\n                        {items.map((pos, i) => (\r\n                            <CarouselSlideItem\r\n                                key={i}\r\n                                idx={i}\r\n                                pos={pos}\r\n                                activeIdx={activeIdx}\r\n                            />\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n                <button className=\"carousel__btn carousel__btn--next\" onClick={() => nextClick()}>\r\n                    <div className=\"arrow_right\"></div>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}